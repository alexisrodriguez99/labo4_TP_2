"use strict";(self.webpackChunklabo4_2do_TP=self.webpackChunklabo4_2do_TP||[]).push([[247],{247:(ir,Re,g)=>{g.r(Re),g.d(Re,{AltaModule:()=>sr});var H=g(9808),F=g(1009),we=g(2122),L=g(5861),c=g(2382),o=g(5e3),ue=g(7566),ce=g(6565),V=g(8852),mt=g(8306),qe=g(9646),K=g(8996),ft=g(4986),gt=g(4482),_t=g(5403),Ct=g(4004),Ze=g(3900),Q=g(5813),ee=g(2011),Tt=g(3942),te=g(9681),Z=g(2090),ke=g(4859);const Se="firebasestorage.googleapis.com",Ie="storageBucket";class C extends Z.ZR{constructor(e,n){super(de(e),`Firebase Storage: ${n} (${de(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,C.prototype)}_codeEquals(e){return de(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function de(t){return"storage/"+t}function pe(){return new C("unknown","An unknown error occurred, please check the error payload for server response.")}function Ee(){return new C("canceled","User canceled the upload/download.")}function Pe(){return new C("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function O(t){return new C("invalid-argument",t)}function Ne(){return new C("app-deleted","The Firebase app was deleted.")}function xe(t){return new C("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $(t,e){return new C("invalid-format","String does not match format '"+t+"': "+e)}function j(t){throw new C("internal-error","Internal error: "+t)}class v{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=v.makeFromUrl(e,n)}catch(s){return new v(e,"")}if(""===r.path)return r;throw function kt(t){return new C("invalid-default-bucket","Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)",u=new RegExp("^gs://"+s+"(/(.*))?$","i");function d(A){A.path_=decodeURIComponent(A.path)}const f=n.replace(/[.]/g,"\\."),y=[{regex:u,indices:{bucket:1,path:3},postModify:function i(A){"/"===A.path.charAt(A.path.length-1)&&(A.path_=A.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${f}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:d},{regex:new RegExp(`^https?://${n===Se?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:d}];for(let A=0;A<y.length;A++){const J=y[A],G=J.regex.exec(e);if(G){let W=G[J.indices.path];W||(W=""),r=new v(G[J.indices.bucket],W),J.postModify(r);break}}if(null==r)throw function Zt(t){return new C("invalid-url","Invalid URL '"+t+"'.")}(e);return r}}class Pt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oe(t){return"string"==typeof t||t instanceof String}function Fe(t){return he()&&t instanceof Blob}function he(){return"undefined"!=typeof Blob}function me(t,e,n,r){if(r<e)throw O(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw O(`Invalid value for '${t}'. Expected ${n} or less.`)}function E(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Le(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var x=(()=>{return(t=x||(x={}))[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",x;var t})();class Ot{constructor(e,n,r,s,i,l,u,a,d,p,f){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=a,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,h)=>{this.resolve_=_,this.reject_=h,this.start_()})}start_(){const n=(r,s)=>{const i=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const a=this.callback_(u,u.getResponse());!function Ft(t){return void 0!==t}(a)?i():i(a)}catch(a){l(a)}else if(null!==u){const a=pe();a.serverResponse=u.getErrorText(),l(this.errorCallback_?this.errorCallback_(u,a):a)}else l(s.canceled?this.appDelete_?Ne():Ee():function qt(){return new C("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?n(0,new ne(!1,null,!0)):this.backoffId_=function Nt(t,e,n){let r=1,s=null,i=null,l=!1,u=0;function a(){return 2===u}let d=!1;function p(...b){d||(d=!0,e.apply(null,b))}function f(b){s=setTimeout(()=>{s=null,t(h,a())},b)}function _(){i&&clearTimeout(i)}function h(b,...w){if(d)return void _();if(b)return _(),void p.call(null,b,...w);if(a()||l)return _(),void p.call(null,b,...w);let y;r<64&&(r*=2),1===u?(u=2,y=0):y=1e3*(r+Math.random()),f(y)}let m=!1;function T(b){m||(m=!0,_(),!d&&(null!==s?(b||(u=2),clearTimeout(s),f(0)):b||(u=1)))}return f(0),i=setTimeout(()=>{l=!0,T(!0)},n),T}((r,s)=>{if(s)return void r(!1,new ne(!1,null,!0));const i=this.connectionFactory_();this.pendingConnection_=i;const l=u=>{null!==this.progressCallback_&&this.progressCallback_(u.loaded,u.lengthComputable?u.total:-1)};null!==this.progressCallback_&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const u=i.getErrorCode()===x.NO_ERROR,a=i.getStatus();if(!u||this.isRetryStatusCode_(a)){const p=i.getErrorCode()===x.ABORT;return void r(!1,new ne(!1,null,p))}const d=-1!==this.successCodes_.indexOf(a);r(!0,new ne(d,i))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function xt(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,s=-1!==[408,429].indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return n||s||i}}class ne{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $t(...t){const e=function Qt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(he())return new Blob(t);throw new C("unsupported-environment","This browser doesn't seem to support creating Blobs")}const R={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fe{constructor(e,n){this.data=e,this.contentType=n||null}}function ge(t,e){switch(t){case R.RAW:return new fe(Me(e));case R.BASE64:case R.BASE64URL:return new fe(Oe(t,e));case R.DATA_URL:return new fe(function Wt(t){const e=new Be(t);return e.base64?Oe(R.BASE64,e.rest):function Xt(t){let e;try{e=decodeURIComponent(t)}catch(n){throw $(R.DATA_URL,"Malformed data URL.")}return Me(e)}(e.rest)}(e),function Vt(t){return new Be(t).contentType}(e))}throw pe()}function Me(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Oe(t,e){switch(t){case R.BASE64:{const s=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(s||i)throw $(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case R.BASE64URL:{const s=-1!==e.indexOf("+"),i=-1!==e.indexOf("/");if(s||i)throw $(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function zt(t){return atob(t)}(e)}catch(s){throw $(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Be{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw $(R.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function Kt(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class k{constructor(e,n){let r=0,s="";Fe(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Fe(this.data_)){const s=function jt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===s?null:new k(s)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new k(r,!0)}}static getBlob(...e){if(he()){const n=e.map(r=>r instanceof k?r.data_:r);return new k($t.apply(null,n))}{const n=e.map(l=>oe(l)?ge(R.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(l=>{for(let u=0;u<l.length;u++)s[i++]=l[u]}),new k(s,!0)}}uploadData(){return this.data_}}function _e(t){let e;try{e=JSON.parse(t)}catch(n){return null}return function Mt(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Ye(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function oo(t,e){return e}class D{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||oo}}let re=null;function z(){if(re)return re;const t=[];t.push(new D("bucket")),t.push(new D("generation")),t.push(new D("metageneration")),t.push(new D("name","fullPath",!0));const n=new D("name");n.xform=function e(i,l){return function no(t){return!oe(t)||t.length<2?t:Ye(t)}(l)},t.push(n);const s=new D("size");return s.xform=function r(i,l){return void 0!==l?Number(l):l},t.push(s),t.push(new D("timeCreated")),t.push(new D("updated")),t.push(new D("md5Hash",null,!0)),t.push(new D("cacheControl",null,!0)),t.push(new D("contentDisposition",null,!0)),t.push(new D("contentEncoding",null,!0)),t.push(new D("contentLanguage",null,!0)),t.push(new D("contentType",null,!0)),t.push(new D("metadata","customMetadata",!0)),re=t,re}function Je(t,e,n){const r=_e(e);return null===r?null:function so(t,e,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const l=n[i];r[l.local]=l.xform(r,e[l.server])}return function ro(t,e){Object.defineProperty(t,"ref",{get:function n(){const i=new v(t.bucket,t.fullPath);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}function be(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}const Ge="prefixes";class S{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function I(t){if(!t)throw pe()}function se(t,e){return function n(r,s){const i=Je(t,s,e);return I(null!==i),i}}function B(t){return function e(n,r){let s;return s=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Rt(){return new C("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ut(){return new C("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Dt(t){return new C("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function wt(t){return new C("unauthorized","User does not have permission to access '"+t+"'.")}(t.path):r,s.serverResponse=r.serverResponse,s}}function X(t){const e=B(t);return function n(r,s){let i=e(r,s);return 404===r.getStatus()&&(i=function yt(t){return new C("object-not-found","Object '"+t+"' does not exist.")}(t.path)),i.serverResponse=s.serverResponse,i}}function Qe(t,e,n){const s=E(e.fullServerUrl(),t.host,t._protocol),l=t.maxOperationRetryTime,u=new S(s,"GET",se(t,n),l);return u.errorHandler=X(e),u}function po(t,e,n,r,s){const i={};i.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const u=E(e.bucketOnlyServerUrl(),t.host,t._protocol),d=t.maxOperationRetryTime,p=new S(u,"GET",function uo(t,e){return function n(r,s){const i=function ao(t,e,n){const r=_e(n);return null===r?null:function lo(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Ge])for(const s of n[Ge]){const i=s.replace(/\/$/,""),l=t._makeStorageReference(new v(e,i));r.prefixes.push(l)}if(n.items)for(const s of n.items){const i=t._makeStorageReference(new v(e,s.name));r.items.push(i)}return r}(t,e,r)}(t,e,s);return I(null!==i),i}}(t,e.bucket),d);return p.urlParams=i,p.errorHandler=B(e),p}function je(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function go(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ie{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Ce(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(s){I(!1)}return I(!!n&&-1!==(e||["active"]).indexOf(n)),n}const To={STATE_CHANGED:"state_changed"},U={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Te(t){switch(t){case"running":case"pausing":case"canceling":return U.RUNNING;case"paused":return U.PAUSED;case"success":return U.SUCCESS;case"canceled":return U.CANCELED;default:return U.ERROR}}class Ao{constructor(e,n,r){if(function Lt(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=null!=n?n:void 0,this.complete=null!=r?r:void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}function Y(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class yo extends class vo{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=x.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=x.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=x.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw j("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==s)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw j("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw j("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw j("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw j("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function q(){return new yo}class Ve{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=z(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function _o(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),l=je(e,r,s),u={name:l.fullPath},a=E(i,t.host,t._protocol),p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},f=be(l,n),m=new S(a,"POST",function h(T){let b;Ce(T);try{b=T.getResponseHeader("X-Goog-Upload-URL")}catch(w){I(!1)}return I(oe(b)),b},t.maxUploadRetryTime);return m.urlParams=u,m.headers=p,m.body=f,m.errorHandler=B(e),m}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,q,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=function bo(t,e,n,r){const a=new S(n,"POST",function i(d){const p=Ce(d,["active","final"]);let f=null;try{f=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch(h){I(!1)}f||I(!1);const _=Number(f);return I(!isNaN(_)),new ie(_,r.size(),"final"===p)},t.maxUploadRetryTime);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=B(e),a}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,q,n,r);this._request=i,i.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new ie(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let l;try{l=function Co(t,e,n,r,s,i,l,u){const a=new ie(0,0);if(l?(a.current=l.current,a.total=l.total):(a.current=0,a.total=r.size()),r.size()!==a.total)throw function It(){return new C("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const d=a.total-a.current;let p=d;s>0&&(p=Math.min(p,s));const f=a.current,m={"X-Goog-Upload-Command":p===d?"upload, finalize":"upload","X-Goog-Upload-Offset":`${a.current}`},T=r.slice(f,f+p);if(null===T)throw Pe();const y=new S(n,"POST",function b(A,J){const G=Ce(A,["active","final"]),De=a.current+p,W=r.size();let Ue;return Ue="final"===G?se(e,i)(A,J):null,new ie(De,W,"final"===G,Ue)},e.maxUploadRetryTime);return y.headers=m,y.body=T.uploadData(),y.progressCallback=u||null,y.errorHandler=B(t),y}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const u=this._ref.storage._makeRequest(l,q,s,i);this._request=u,u.getPromise().then(a=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(a.current),a.finalized?(this._metadata=a.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Qe(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,q,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function ze(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},a=function u(){let y="";for(let A=0;A<2;A++)y+=Math.random().toString().slice(2);return y}();l["Content-Type"]="multipart/related; boundary="+a;const d=je(e,r,s),p=be(d,n),h=k.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+p+"\r\n--"+a+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===h)throw Pe();const m={name:d.fullPath},T=E(i,t.host,t._protocol),w=t.maxUploadRetryTime,N=new S(T,"POST",se(t,n),w);return N.urlParams=m,N.headers=l,N.body=h.uploadData(),N.errorHandler=B(e),N}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,q,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ee(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Te(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Ao(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Te(this._state)){case U.SUCCESS:Y(this._resolve.bind(null,this.snapshot))();break;case U.CANCELED:case U.ERROR:Y(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Te(this._state)){case U.RUNNING:case U.PAUSED:e.next&&Y(e.next.bind(e,this.snapshot))();break;case U.SUCCESS:e.complete&&Y(e.complete.bind(e))();break;default:e.error&&Y(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class M{constructor(e,n){this._service=e,this._location=n instanceof v?n:v.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new M(e,n)}get root(){const e=new v(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ye(this._location.path)}get storage(){return this._service}get parent(){const e=function eo(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new v(this._location.bucket,e);return new M(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw xe(e)}}function et(t,e,n){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(t,e,n){const s=yield tt(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield et(t,e,s.nextPageToken))})).apply(this,arguments)}function tt(t,e){null!=e&&"number"==typeof e.maxResults&&me("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=po(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,q)}function No(t){t._throwIfRoot("getDownloadURL");const e=function ho(t,e,n){const s=E(e.fullServerUrl(),t.host,t._protocol),l=t.maxOperationRetryTime,u=new S(s,"GET",function co(t,e){return function n(r,s){const i=Je(t,s,e);return I(null!==i),function io(t,e,n,r){const s=_e(e);if(null===s||!oe(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const l=encodeURIComponent;return i.split(",").map(d=>{const f=t.fullPath;return E("/b/"+l(t.bucket)+"/o/"+l(f),n,r)+Le({alt:"media",token:d})})[0]}(i,s,t.host,t._protocol)}}(t,n),l);return u.errorHandler=X(e),u}(t.storage,t._location,z());return t.storage.makeRequestWithTokens(e,q).then(n=>{if(null===n)throw function Et(){return new C("no-download-url","The given file does not have any download URLs.")}();return n})}function ot(t,e){const n=function to(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new v(t._location.bucket,n);return new M(t.storage,r)}function nt(t,e){if(t instanceof ve){const n=t;if(null==n._bucket)throw function St(){return new C("no-default-bucket","No default bucket found. Did you set the '"+Ie+"' property when initializing the app?")}();const r=new M(n,n._bucket);return null!=e?nt(r,e):r}return void 0!==e?ot(t,e):t}function Mo(t,e){if(e&&function Fo(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof ve)return function Lo(t,e){return new M(t,e)}(t,e);throw O("To use ref(service, url), the first argument must be a Storage instance.")}return nt(t,e)}function rt(t,e){const n=null==e?void 0:e[Ie];return null==n?null:v.makeFromBucketSpec(n,t)}class ve{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Se,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?v.makeFromBucketSpec(s,this._host):rt(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?v.makeFromBucketSpec(this._url,e):rt(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){me("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){me("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,L.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,L.Z)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new M(this,e)}_makeRequest(e,n,r,s){if(this._deleted)return new Pt(Ne());{const i=function Ht(t,e,n,r,s,i){const l=Le(t.urlParams),u=t.url+l,a=Object.assign({},t.headers);return function Jt(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function Bt(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function Yt(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),function Gt(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(a,r),new Ot(u,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s)}(e,this._appId,r,s,n,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}makeRequestWithTokens(e,n){var r=this;return(0,L.Z)(function*(){const[s,i]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,s,i).getPromise()})()}}const st="@firebase/storage";function at(t,e){return Mo(t=(0,Z.m9)(t),e)}function Xo(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ve(n,r,s,e,te.SDK_VERSION)}!function Wo(){(0,te._registerComponent)(new ke.wA("storage",Xo,"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(st,"0.9.6",""),(0,te.registerVersion)(st,"0.9.6","esm2017")}();class le{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ut{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new le(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new le(r,this,this._ref))},n)}on(e,n,r,s){let i;return n&&(i="function"==typeof n?l=>n(new le(l,this,this._ref)):{next:n.next?l=>n.next(new le(l,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,i,r||void 0,s||void 0)}}class ct{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new P(e,this._service))}get items(){return this._delegate.items.map(e=>new P(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class P{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function jo(t,e){return ot(t,e)}(this._delegate,e);return new P(n,this.storage)}get root(){return new P(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new P(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new ut(function Bo(t,e,n){return function ko(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ve(t,new k(e),n)}(t=(0,Z.m9)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=R.RAW,r){this._throwIfRoot("putString");const s=ge(n,e),i=Object.assign({},r);return null==i.contentType&&null!=s.contentType&&(i.contentType=s.contentType),new ut(new Ve(this._delegate,new k(s.data,!0),i),this)}listAll(){return function Ho(t){return function Io(t){const e={prefixes:[],items:[]};return et(t,e).then(()=>e)}(t=(0,Z.m9)(t))}(this._delegate).then(e=>new ct(e,this.storage))}list(e){return function Go(t,e){return tt(t=(0,Z.m9)(t),e)}(this._delegate,e||void 0).then(n=>new ct(n,this.storage))}getMetadata(){return function Yo(t){return function Eo(t){t._throwIfRoot("getMetadata");const e=Qe(t.storage,t._location,z());return t.storage.makeRequestWithTokens(e,q)}(t=(0,Z.m9)(t))}(this._delegate)}updateMetadata(e){return function Jo(t,e){return function Po(t,e){t._throwIfRoot("updateMetadata");const n=function mo(t,e,n,r){const i=E(e.fullServerUrl(),t.host,t._protocol),u=be(n,r),d=t.maxOperationRetryTime,p=new S(i,"PATCH",se(t,r),d);return p.headers={"Content-Type":"application/json; charset=utf-8"},p.body=u,p.errorHandler=X(e),p}(t.storage,t._location,e,z());return t.storage.makeRequestWithTokens(n,q)}(t=(0,Z.m9)(t),e)}(this._delegate,e)}getDownloadURL(){return function Qo(t){return No(t=(0,Z.m9)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function $o(t){return function xo(t){t._throwIfRoot("deleteObject");const e=function fo(t,e){const r=E(e.fullServerUrl(),t.host,t._protocol),u=new S(r,"DELETE",function l(a,d){},t.maxOperationRetryTime);return u.successCodes=[200,204],u.errorHandler=X(e),u}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,q)}(t=(0,Z.m9)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xe(e)}}class dt{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(pt(e))throw O("ref() expected a child path but got a URL, use refFromURL instead.");return new P(at(this._delegate,e),this)}refFromURL(e){if(!pt(e))throw O("refFromURL() expected a full URL but got a child path, use ref() instead.");try{v.makeFromUrl(e,this._delegate.host)}catch(n){throw O("refFromUrl() expected a valid full URL but got an invalid one.")}return new P(at(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function zo(t,e,n,r={}){!function Oo(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken="string"==typeof s?s:(0,Z.Sg)(s,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function pt(t){return/^[A-Za-z]+:\/\//.test(t)}function tn(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new dt(n,r)}!function on(t){const e={TaskState:U,TaskEvent:To,StringFormat:R,Storage:dt,Reference:P};t.INTERNAL.registerComponent(new ke.wA("storage-compat",tn,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.1.14")}(Tt.Z);var nn=g(440);function ht(t){const e=function rn(t){return new mt.y(e=>{const n=l=>e.next(l);n(t.snapshot);const i=t.on("state_changed",n);return t.then(l=>{n(l),e.complete()},l=>{n(t.snapshot),(l=>{e.error(l)})(l)}),function(){i()}}).pipe(function bt(t,e=ft.z){return(0,gt.e)((n,r)=>{let s=null,i=null,l=null;const u=()=>{if(s){s.unsubscribe(),s=null;const d=i;i=null,r.next(d)}};function a(){const d=l+t,p=e.now();if(p<d)return s=this.schedule(void 0,d-p),void r.add(s);u()}n.subscribe((0,_t.x)(r,d=>{i=d,l=e.now(),s||(s=e.schedule(a,t),r.add(s))},()=>{u(),r.complete()},void 0,()=>{i=s=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ct.U)(n=>n.bytesTransferred/n.totalBytes*100))}}function ae(t){return{getDownloadURL:()=>(0,qe.of)(void 0).pipe(Q.fc,(0,Ze.w)(()=>t.getDownloadURL()),Q.iC),getMetadata:()=>(0,qe.of)(void 0).pipe(Q.fc,(0,Ze.w)(()=>t.getMetadata()),Q.iC),delete:()=>(0,K.D)(t.delete()),child:e=>ae(t.child(e)),updateMetadata:e=>(0,K.D)(t.updateMetadata(e)),put:(e,n)=>ht(t.put(e,n)),putString:(e,n,r)=>ht(t.putString(e,n,r)),list:e=>(0,K.D)(t.list(e)),listAll:()=>(0,K.D)(t.listAll())}}g(127);const sn=new o.OlP("angularfire2.storageBucket"),ln=new o.OlP("angularfire2.storage.maxUploadRetryTime"),an=new o.OlP("angularfire2.storage.maxOperationRetryTime"),un=new o.OlP("angularfire2.storage.use-emulator");let ye=(()=>{class t{constructor(n,r,s,i,l,u,a,d,p,f){const _=(0,ee.on)(n,l,r);this.storage=(0,ee.cc)(`${_.name}.storage.${s}`,"AngularFireStorage",_.name,()=>{const h=l.runOutsideAngular(()=>_.storage(s||void 0)),m=p;return m&&h.useEmulator(...m),a&&h.setMaxUploadRetryTime(a),d&&h.setMaxOperationRetryTime(d),h},[a,d])}ref(n){return ae(this.storage.ref(n))}refFromURL(n){return ae(this.storage.refFromURL(n))}upload(n,r,s){return ae(this.storage.ref(n)).put(r,s)}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(ee.Dh),o.LFG(ee.xv,8),o.LFG(sn,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Q.HU),o.LFG(ln,8),o.LFG(an,8),o.LFG(un,8),o.LFG(nn.nm,8))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();function cn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El nombre es requerido"),o.qZA())}function dn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El nombre no tiene que tener espacios"),o.qZA())}function pn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El apellido es requerido"),o.qZA())}function hn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El apellido no tiene que tener espacios"),o.qZA())}function mn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"L edad es requerido"),o.qZA())}function fn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"La edad debe estar entre 18 y 100"),o.qZA())}function gn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El dni es requerido"),o.qZA())}function _n(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El dni debe estar entre 7 a 9 digitos"),o.qZA())}function bn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El mail es requerido"),o.qZA())}function Cn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El mail no tiene que un formato correcto"),o.qZA())}function Tn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El contrase\xf1a es requerido"),o.qZA())}function An(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"El contrase\xf1a no tiene que tener espacios"),o.qZA())}function vn(t,e){1&t&&(o.TgZ(0,"small",27),o._uU(1,"La foto es requerida"),o.qZA())}let yn=(()=>{class t{constructor(n,r,s,i,l,u){this.fb=n,this.afs=r,this.firestore=s,this.router=i,this.authSer=l,this.firestorage=u,this.paisSeleccionado="",this.listaEspecialidades=[],this.usuario={id:"",perfil:"admin",nombre:"",apellido:"",edad:0,dni:0,mail:"",contrasenia:"",img1:""}}ngOnInit(){this.grupoDeControles=this.fb.group({nombre:["",[c.kI.required,this.validadorDeEspacios]],apellido:["",[c.kI.required,this.validadorDeEspacios]],edad:["",[c.kI.required,c.kI.min(18),c.kI.max(100)]],dni:["",[c.kI.required,c.kI.min(1e7),c.kI.max(99999999)]],mail:["",[c.kI.required,c.kI.email]],contrasenia:["",[c.kI.required,this.validadorDeEspacios]],img:[null,c.kI.required]})}enviar(){var n=this;return(0,L.Z)(function*(){var r,s,i,l,u,a;try{let d;console.info("formulario",n.grupoDeControles),n.usuario.nombre=null===(r=n.grupoDeControles.get("nombre"))||void 0===r?void 0:r.value,n.usuario.apellido=null===(s=n.grupoDeControles.get("apellido"))||void 0===s?void 0:s.value,n.usuario.edad=null===(i=n.grupoDeControles.get("edad"))||void 0===i?void 0:i.value,n.usuario.dni=null===(l=n.grupoDeControles.get("dni"))||void 0===l?void 0:l.value,n.usuario.contrasenia=null===(u=n.grupoDeControles.get("contrasenia"))||void 0===u?void 0:u.value,n.usuario.mail=null===(a=n.grupoDeControles.get("mail"))||void 0===a?void 0:a.value,alert(n.usuario.mail),yield n.authSer.register(n.usuario.mail,n.usuario.contrasenia).then(function(h){console.log("el uid  "+h.user.uid),d=h.user.uid});let p="fotos/"+n.usuario.mail+"/1";const f=n.firestorage.ref(p);n.firestorage.upload(p,n.foto).snapshotChanges().toPromise().then(()=>{f.getDownloadURL().toPromise().then(h=>{n.usuario.img1=h;let m="fotos/"+n.usuario.mail+"/2";n.firestorage.ref(m),n.firestorage.upload(m,n.foto2),n.usuario.id=d,console.log("chekeo el id_"+n.usuario.id),n.firestore.actualizar("usuariosClinica",n.usuario.id,n.usuario).then(()=>{})})}),n.router.navigate(["/home"])}catch(d){alert("hola"+d)}})()}validadorDeEspacios(n){return 1==n.value.includes(" ")?{validadorDeEspacios:!0}:null}paisSelecc(n){var r;console.log(n.nombre),this.listaEspecialidades.push(n.nombre),null===(r=this.grupoDeControles.get("especialidad"))||void 0===r||r.setValue(this.listaEspecialidades)}onSelecFoto(n,r){n.target.files&&n.target.files[0]&&("foto1"==r?this.foto=n.target.files[0]:this.foto2=n.target.files[0])}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.qu),o.Y36(ue.ST),o.Y36(ce.C),o.Y36(F.F0),o.Y36(V.e),o.Y36(ye))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-alta-admin"]],decls:65,vars:15,consts:[[1,"container"],[1,"row"],[1,"col-md-8","order-md-1"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"col-md-6","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","formControlName","nombre",1,"form-control"],["class","invalid",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","id","dni","placeholder","Ingrese el dni","formControlName","dni",1,"form-control"],["for","mail",1,"form-label"],["type","text","id","mail","placeholder","Ingrese mail","formControlName","mail",1,"form-control"],["for","contrasenia",1,"form-label"],["type","password","id","contrasenia","placeholder","Ingrese contrasenia","formControlName","contrasenia",1,"form-control"],["type","file","formControlName","img","placeholder","Seleccione Foto",1,"form-control",3,"change"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"],[1,"invalid"]],template:function(n,r){1&n&&(o._UZ(0,"br"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3),o._uU(5,"Alta Admin"),o.qZA(),o.TgZ(6,"form",4),o.NdJ("ngSubmit",function(){return r.enviar()}),o.TgZ(7,"div",1)(8,"div",5)(9,"label",6),o._uU(10,"Nombre"),o.qZA(),o._UZ(11,"input",7),o.YNc(12,cn,2,0,"small",8),o.YNc(13,dn,2,0,"small",8),o.qZA(),o.TgZ(14,"div",5)(15,"label",9),o._uU(16,"Apellido"),o.qZA(),o._UZ(17,"input",10),o.YNc(18,pn,2,0,"small",8),o.YNc(19,hn,2,0,"small",8),o.qZA(),o.TgZ(20,"div",5)(21,"label",11),o._uU(22,"Edad"),o.qZA(),o._UZ(23,"input",12),o.YNc(24,mn,2,0,"small",8),o.YNc(25,fn,2,0,"small",8),o.qZA()(),o.TgZ(26,"div",5)(27,"label",13),o._uU(28,"DNI"),o.qZA(),o._UZ(29,"input",14),o.YNc(30,gn,2,0,"small",8),o.YNc(31,_n,2,0,"small",8),o.qZA(),o.TgZ(32,"div",5)(33,"label",15),o._uU(34,"Mail"),o.qZA(),o._UZ(35,"input",16),o.YNc(36,bn,2,0,"small",8),o.YNc(37,Cn,2,0,"small",8),o.qZA(),o.TgZ(38,"div",5)(39,"label",17),o._uU(40,"Contrase\xf1a"),o.qZA(),o._UZ(41,"input",18),o.YNc(42,Tn,2,0,"small",8),o.YNc(43,An,2,0,"small",8),o.qZA(),o.TgZ(44,"div",5)(45,"label",13),o._uU(46,"Imagen de perfil"),o.qZA(),o.TgZ(47,"input",19),o.NdJ("change",function(i){return r.onSelecFoto(i,"foto1")}),o.qZA(),o.YNc(48,vn,2,0,"small",8),o.qZA(),o._UZ(49,"hr",20),o.TgZ(50,"button",21),o._uU(51,"Agregar"),o.qZA()()()(),o.TgZ(52,"footer",22)(53,"p",23),o._uU(54,"\xa9 2017-2018 Company Name"),o.qZA(),o.TgZ(55,"ul",24)(56,"li",25)(57,"a",26),o._uU(58,"Privacy"),o.qZA()(),o.TgZ(59,"li",25)(60,"a",26),o._uU(61,"Terms"),o.qZA()(),o.TgZ(62,"li",25)(63,"a",26),o._uU(64,"Support"),o.qZA()()()()()),2&n&&(o.xp6(6),o.Q6J("formGroup",r.grupoDeControles),o.xp6(6),o.Q6J("ngIf",(null==r.grupoDeControles.controls.nombre.errors?null:r.grupoDeControles.controls.nombre.errors.required)&&r.grupoDeControles.controls.nombre.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.nombre.errors?null:r.grupoDeControles.controls.nombre.errors.validadorDeEspacios)&&r.grupoDeControles.controls.nombre.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.apellido.errors?null:r.grupoDeControles.controls.apellido.errors.required)&&r.grupoDeControles.controls.apellido.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.apellido.errors?null:r.grupoDeControles.controls.apellido.errors.validadorDeEspacios)&&r.grupoDeControles.controls.apellido.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.required)&&r.grupoDeControles.controls.edad.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.min)||(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.max)),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.required)&&r.grupoDeControles.controls.dni.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.min)||(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.max)),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.mail.errors?null:r.grupoDeControles.controls.mail.errors.required)&&r.grupoDeControles.controls.mail.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.mail.errors?null:r.grupoDeControles.controls.mail.errors.email)&&r.grupoDeControles.controls.mail.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.contrasenia.errors?null:r.grupoDeControles.controls.contrasenia.errors.required)&&r.grupoDeControles.controls.contrasenia.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.contrasenia.errors?null:r.grupoDeControles.controls.contrasenia.errors.validadorDeEspacios)&&r.grupoDeControles.controls.contrasenia.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.img.errors?null:r.grupoDeControles.controls.img.errors.required)&&r.grupoDeControles.controls.img.touched),o.xp6(2),o.Q6J("disabled",r.grupoDeControles.invalid))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,H.O5,c.wV],styles:[""]}),t})();function Dn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El nombre es requerido"),o.qZA())}function Un(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El nombre no tiene que tener espacios"),o.qZA())}function Rn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El apellido es requerido"),o.qZA())}function wn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El apellido no tiene que tener espacios"),o.qZA())}function qn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"L edad es requerido"),o.qZA())}function Zn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"La edad debe estar entre 18 y 100"),o.qZA())}function kn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El dni es requerido"),o.qZA())}function Sn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El dni debe estar entre 7 a 9 digitos"),o.qZA())}function In(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"La especialidad es requerido"),o.qZA())}function En(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El especialidad no tiene que un formato correcto"),o.qZA())}function Pn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El mail es requerido"),o.qZA())}function Nn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El mail no tiene que un formato correcto"),o.qZA())}function xn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El contrase\xf1a es requerido"),o.qZA())}function Fn(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"El contrase\xf1a no tiene que tener espacios"),o.qZA())}function Ln(t,e){1&t&&(o.TgZ(0,"small",33),o._uU(1,"La foto es requerida"),o.qZA())}let Mn=(()=>{class t{constructor(n,r,s,i,l,u){this.fb=n,this.afs=r,this.firestore=s,this.router=i,this.authSer=l,this.firestorage=u,this.paisSeleccionado="",this.listaEspecialidades=[],this.usuario={id:"",perfil:"especialista",nombre:"",apellido:"",edad:0,dni:0,mail:"",contrasenia:"",img1:"",permiso:!1,especialidad:[]}}ngOnInit(){this.grupoDeControles=this.fb.group({nombre:["",[c.kI.required,this.validadorDeEspacios]],apellido:["",[c.kI.required,this.validadorDeEspacios]],edad:["",[c.kI.required,c.kI.min(18),c.kI.max(100)]],dni:["",[c.kI.required,c.kI.min(1e7),c.kI.max(99999999)]],especialidad:["",[c.kI.required,this.validadorDeEspacios]],mail:["",[c.kI.required,c.kI.email]],contrasenia:["",[c.kI.required,this.validadorDeEspacios]],img:[null,c.kI.required]})}enviar(){var n=this;return(0,L.Z)(function*(){var r,s,i,l,u,a,d;try{let p;console.info("formulario",n.grupoDeControles),n.usuario.nombre=null===(r=n.grupoDeControles.get("nombre"))||void 0===r?void 0:r.value,n.usuario.apellido=null===(s=n.grupoDeControles.get("apellido"))||void 0===s?void 0:s.value,n.usuario.edad=null===(i=n.grupoDeControles.get("edad"))||void 0===i?void 0:i.value,n.usuario.dni=null===(l=n.grupoDeControles.get("dni"))||void 0===l?void 0:l.value,n.usuario.contrasenia=null===(u=n.grupoDeControles.get("contrasenia"))||void 0===u?void 0:u.value,n.usuario.mail=null===(a=n.grupoDeControles.get("mail"))||void 0===a?void 0:a.value,n.usuario.especialidad=null===(d=n.grupoDeControles.get("especialidad"))||void 0===d?void 0:d.value,alert(n.usuario.mail),yield n.authSer.register(n.usuario.mail,n.usuario.contrasenia).then(function(m){console.log("el uid  "+m.user.uid),p=m.user.uid});let f="fotos/"+n.usuario.mail+"/1";const _=n.firestorage.ref(f);n.firestorage.upload(f,n.foto).snapshotChanges().toPromise().then(()=>{_.getDownloadURL().toPromise().then(m=>{n.usuario.img1=m;let T="fotos/"+n.usuario.mail+"/2";n.firestorage.ref(T),n.firestorage.upload(T,n.foto2),n.usuario.id=p,console.log("chekeo el id_"+n.usuario.id),n.firestore.actualizar("usuariosClinica",n.usuario.id,n.usuario).then(()=>{})})}),n.router.navigate(["/home"])}catch(p){alert("hola"+p)}})()}validadorDeEspacios(n){return 1==n.value.includes(" ")?{validadorDeEspacios:!0}:null}paisSelecc(n){var r;console.log(n.nombre),this.listaEspecialidades.push(n.nombre),null===(r=this.grupoDeControles.get("especialidad"))||void 0===r||r.setValue(this.listaEspecialidades)}onSelecFoto(n,r){n.target.files&&n.target.files[0]&&("foto1"==r?this.foto=n.target.files[0]:this.foto2=n.target.files[0])}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.qu),o.Y36(ue.ST),o.Y36(ce.C),o.Y36(F.F0),o.Y36(V.e),o.Y36(ye))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-alta-especialista"]],decls:76,vars:17,consts:[[1,"container"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[3,"unaEspecialidad"],[1,"col-md-8","order-md-1"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"col-md-6","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","formControlName","nombre",1,"form-control"],["class","invalid",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","id","dni","placeholder","Ingrese el dni","formControlName","dni",1,"form-control"],["for","especialidad",1,"form-label"],["readonly","","type","text","id","especialidad","placeholder","Ingrese especialidad","formControlName","especialidad",1,"form-control"],["for","mail",1,"form-label"],["type","text","id","mail","placeholder","Ingrese mail","formControlName","mail",1,"form-control"],["for","contrasenia",1,"form-label"],["type","password","id","contrasenia","placeholder","Ingrese contrasenia","formControlName","contrasenia",1,"form-control"],["type","file","formControlName","img","placeholder","Seleccione Foto",1,"form-control",3,"change"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"],[1,"invalid"]],template:function(n,r){1&n&&(o._UZ(0,"br"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3)(5,"span",4),o._uU(6,"ESPECIALIDAD"),o.qZA()(),o.TgZ(7,"app-especialidades",5),o.NdJ("unaEspecialidad",function(i){return r.paisSelecc(i)}),o.qZA()(),o.TgZ(8,"div",6)(9,"h4",7),o._uU(10,"Alta especialista"),o.qZA(),o.TgZ(11,"form",8),o.NdJ("ngSubmit",function(){return r.enviar()}),o.TgZ(12,"div",1)(13,"div",9)(14,"label",10),o._uU(15,"Nombre"),o.qZA(),o._UZ(16,"input",11),o.YNc(17,Dn,2,0,"small",12),o.YNc(18,Un,2,0,"small",12),o.qZA(),o.TgZ(19,"div",9)(20,"label",13),o._uU(21,"Apellido"),o.qZA(),o._UZ(22,"input",14),o.YNc(23,Rn,2,0,"small",12),o.YNc(24,wn,2,0,"small",12),o.qZA(),o.TgZ(25,"div",9)(26,"label",15),o._uU(27,"Edad"),o.qZA(),o._UZ(28,"input",16),o.YNc(29,qn,2,0,"small",12),o.YNc(30,Zn,2,0,"small",12),o.qZA()(),o.TgZ(31,"div",9)(32,"label",17),o._uU(33,"DNI"),o.qZA(),o._UZ(34,"input",18),o.YNc(35,kn,2,0,"small",12),o.YNc(36,Sn,2,0,"small",12),o.qZA(),o.TgZ(37,"div",9)(38,"label",19),o._uU(39,"Especialidad"),o.qZA(),o._UZ(40,"input",20),o.YNc(41,In,2,0,"small",12),o.YNc(42,En,2,0,"small",12),o.qZA(),o.TgZ(43,"div",9)(44,"label",21),o._uU(45,"Mail"),o.qZA(),o._UZ(46,"input",22),o.YNc(47,Pn,2,0,"small",12),o.YNc(48,Nn,2,0,"small",12),o.qZA(),o.TgZ(49,"div",9)(50,"label",23),o._uU(51,"Contrase\xf1a"),o.qZA(),o._UZ(52,"input",24),o.YNc(53,xn,2,0,"small",12),o.YNc(54,Fn,2,0,"small",12),o.qZA(),o.TgZ(55,"div",9)(56,"label",17),o._uU(57,"Imagen de perfil"),o.qZA(),o.TgZ(58,"input",25),o.NdJ("change",function(i){return r.onSelecFoto(i,"foto1")}),o.qZA(),o.YNc(59,Ln,2,0,"small",12),o.qZA(),o._UZ(60,"hr",26),o.TgZ(61,"button",27),o._uU(62,"Agregar"),o.qZA()()()(),o.TgZ(63,"footer",28)(64,"p",29),o._uU(65,"\xa9 2017-2018 Company Name"),o.qZA(),o.TgZ(66,"ul",30)(67,"li",31)(68,"a",32),o._uU(69,"Privacy"),o.qZA()(),o.TgZ(70,"li",31)(71,"a",32),o._uU(72,"Terms"),o.qZA()(),o.TgZ(73,"li",31)(74,"a",32),o._uU(75,"Support"),o.qZA()()()()()),2&n&&(o.xp6(11),o.Q6J("formGroup",r.grupoDeControles),o.xp6(6),o.Q6J("ngIf",(null==r.grupoDeControles.controls.nombre.errors?null:r.grupoDeControles.controls.nombre.errors.required)&&r.grupoDeControles.controls.nombre.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.nombre.errors?null:r.grupoDeControles.controls.nombre.errors.validadorDeEspacios)&&r.grupoDeControles.controls.nombre.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.apellido.errors?null:r.grupoDeControles.controls.apellido.errors.required)&&r.grupoDeControles.controls.apellido.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.apellido.errors?null:r.grupoDeControles.controls.apellido.errors.validadorDeEspacios)&&r.grupoDeControles.controls.apellido.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.required)&&r.grupoDeControles.controls.edad.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.min)||(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.max)),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.required)&&r.grupoDeControles.controls.dni.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.min)||(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.max)),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.especialidad.errors?null:r.grupoDeControles.controls.especialidad.errors.required)&&r.grupoDeControles.controls.especialidad.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.especialidad.errors?null:r.grupoDeControles.controls.especialidad.errors.validadorDeEspacios)&&r.grupoDeControles.controls.especialidad.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.mail.errors?null:r.grupoDeControles.controls.mail.errors.required)&&r.grupoDeControles.controls.mail.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.mail.errors?null:r.grupoDeControles.controls.mail.errors.email)&&r.grupoDeControles.controls.mail.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.contrasenia.errors?null:r.grupoDeControles.controls.contrasenia.errors.required)&&r.grupoDeControles.controls.contrasenia.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.contrasenia.errors?null:r.grupoDeControles.controls.contrasenia.errors.validadorDeEspacios)&&r.grupoDeControles.controls.contrasenia.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.img.errors?null:r.grupoDeControles.controls.img.errors.required)&&r.grupoDeControles.controls.img.touched),o.xp6(2),o.Q6J("disabled",r.grupoDeControles.invalid))},directives:[we.F,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,H.O5,c.wV],styles:[""]}),t})();function On(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El nombre es requerido"),o.qZA())}function Bn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El nombre no tiene que tener espacios"),o.qZA())}function Yn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El apellido es requerido"),o.qZA())}function Jn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El apellido no tiene que tener espacios"),o.qZA())}function Gn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"L edad es requerido"),o.qZA())}function Hn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"La edad debe estar entre 18 y 100"),o.qZA())}function Qn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El dni es requerido"),o.qZA())}function $n(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El dni debe estar entre 7 a 9 digitos"),o.qZA())}function jn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El mail es requerido"),o.qZA())}function zn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El mail es requerido"),o.qZA())}function Xn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El mail no tiene que un formato correcto"),o.qZA())}function Wn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El contrase\xf1a es requerido"),o.qZA())}function Vn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"El contrase\xf1a no tiene que tener espacios"),o.qZA())}function Kn(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"La foto es requerida"),o.qZA())}function er(t,e){1&t&&(o.TgZ(0,"small",30),o._uU(1,"La foto es requerida"),o.qZA())}let tr=(()=>{class t{constructor(n,r,s,i,l,u){this.fb=n,this.afs=r,this.firestore=s,this.router=i,this.authSer=l,this.firestorage=u,this.paisSeleccionado="",this.usuario={id:"",perfil:"paciente",nombre:"",apellido:"",edad:0,dni:0,mail:"",contrasenia:"",permiso:!0,img1:"",img2:"",obraSocial:""}}ngOnInit(){this.grupoDeControles=this.fb.group({nombre:["",[c.kI.required,this.validadorDeEspacios]],apellido:["",[c.kI.required,this.validadorDeEspacios]],edad:["",[c.kI.required,c.kI.min(18),c.kI.max(100)]],dni:["",[c.kI.required,c.kI.min(1e7),c.kI.max(99999999)]],obraSocial:["",[c.kI.required]],mail:["",[c.kI.required,c.kI.email]],contrasenia:["",[c.kI.required,this.validadorDeEspacios]],img:[null,c.kI.required],img2:[null,c.kI.required]})}enviar(){var n=this;return(0,L.Z)(function*(){var r,s,i,l,u,a;let d;console.info("formulario",n.grupoDeControles),n.usuario.nombre=null===(r=n.grupoDeControles.get("nombre"))||void 0===r?void 0:r.value,n.usuario.apellido=null===(s=n.grupoDeControles.get("apellido"))||void 0===s?void 0:s.value,n.usuario.edad=null===(i=n.grupoDeControles.get("edad"))||void 0===i?void 0:i.value,n.usuario.dni=null===(l=n.grupoDeControles.get("dni"))||void 0===l?void 0:l.value,n.usuario.mail=null===(u=n.grupoDeControles.get("mail"))||void 0===u?void 0:u.value,n.usuario.contrasenia=null===(a=n.grupoDeControles.get("contrasenia"))||void 0===a?void 0:a.value,yield n.authSer.register(n.usuario.mail,n.usuario.contrasenia).then(function(h){console.log("el uid  "+h.user.uid),d=h.user.uid});let p="fotos/"+n.usuario.mail+"/1";const f=n.firestorage.ref(p);n.firestorage.upload(p,n.foto).snapshotChanges().toPromise().then(()=>{f.getDownloadURL().toPromise().then(h=>{n.usuario.img1=h;let m="fotos/"+n.usuario.mail+"/2";const T=n.firestorage.ref(m);n.firestorage.upload(m,n.foto2).snapshotChanges().toPromise().then(()=>{T.getDownloadURL().toPromise().then(w=>{n.usuario.img2=w,n.usuario.id=d,console.log("chekeo el id_"+n.usuario.id),n.firestore.actualizar("usuariosClinica",n.usuario.id,n.usuario).then(()=>{})})}),n.router.navigate(["/home"])})})})()}validadorDeEspacios(n){return 1==n.value.includes(" ")?{validadorDeEspacios:!0}:null}paisSelecc(n){var r;console.log("ahoasfdsafd"),this.paisMostrar=n,null===(r=this.grupoDeControles.get("pais"))||void 0===r||r.setValue(n.name.common),console.log(this.paisMostrar),console.log("ahoasfdsafd")}onSelecFoto(n,r){n.target.files&&n.target.files[0]&&("foto1"==r?this.foto=n.target.files[0]:this.foto2=n.target.files[0])}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.qu),o.Y36(ue.ST),o.Y36(ce.C),o.Y36(F.F0),o.Y36(V.e),o.Y36(ye))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-alta-paciente"]],decls:75,vars:17,consts:[[1,"container"],[1,"row"],[1,"col-md-8","order-md-1"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"col-md-6","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","formControlName","nombre",1,"form-control"],["class","invalid",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","id","dni","placeholder","Ingrese el dni","formControlName","dni",1,"form-control"],["for","obraSocial",1,"form-label"],["type","text","id","obraSocial","placeholder","Ingrese obraSocial","formControlName","obraSocial",1,"form-control"],["for","mail",1,"form-label"],["type","text","id","mail","placeholder","Ingrese mail","formControlName","mail",1,"form-control"],["for","contrasenia",1,"form-label"],["type","password","id","contrasenia","placeholder","Ingrese contrasenia","formControlName","contrasenia",1,"form-control"],["type","file","formControlName","img","placeholder","Seleccione Foto",1,"form-control",3,"change"],["type","file","formControlName","img2","placeholder","Seleccione Foto",1,"form-control",3,"change"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","#"],[1,"invalid"]],template:function(n,r){1&n&&(o._UZ(0,"br"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3),o._uU(5,"Alta repartidor"),o.qZA(),o.TgZ(6,"form",4),o.NdJ("ngSubmit",function(){return r.enviar()}),o.TgZ(7,"div",1)(8,"div",5)(9,"label",6),o._uU(10,"Nombre"),o.qZA(),o._UZ(11,"input",7),o.YNc(12,On,2,0,"small",8),o.YNc(13,Bn,2,0,"small",8),o.qZA(),o.TgZ(14,"div",5)(15,"label",9),o._uU(16,"Apellido"),o.qZA(),o._UZ(17,"input",10),o.YNc(18,Yn,2,0,"small",8),o.YNc(19,Jn,2,0,"small",8),o.qZA(),o.TgZ(20,"div",5)(21,"label",11),o._uU(22,"Edad"),o.qZA(),o._UZ(23,"input",12),o.YNc(24,Gn,2,0,"small",8),o.YNc(25,Hn,2,0,"small",8),o.qZA()(),o.TgZ(26,"div",5)(27,"label",13),o._uU(28,"DNI"),o.qZA(),o._UZ(29,"input",14),o.YNc(30,Qn,2,0,"small",8),o.YNc(31,$n,2,0,"small",8),o.qZA(),o.TgZ(32,"div",5)(33,"label",15),o._uU(34,"Obra Social"),o.qZA(),o._UZ(35,"input",16),o.YNc(36,jn,2,0,"small",8),o.qZA(),o.TgZ(37,"div",5)(38,"label",17),o._uU(39,"Mail"),o.qZA(),o._UZ(40,"input",18),o.YNc(41,zn,2,0,"small",8),o.YNc(42,Xn,2,0,"small",8),o.qZA(),o.TgZ(43,"div",5)(44,"label",19),o._uU(45,"Contrase\xf1a"),o.qZA(),o._UZ(46,"input",20),o.YNc(47,Wn,2,0,"small",8),o.YNc(48,Vn,2,0,"small",8),o.qZA(),o.TgZ(49,"div",5)(50,"label",13),o._uU(51,"Imagen de perfil"),o.qZA(),o.TgZ(52,"input",21),o.NdJ("change",function(i){return r.onSelecFoto(i,"foto1")}),o.qZA(),o.YNc(53,Kn,2,0,"small",8),o.qZA(),o.TgZ(54,"div",5)(55,"label",13),o._uU(56,"Imagen de perfil"),o.qZA(),o.TgZ(57,"input",22),o.NdJ("change",function(i){return r.onSelecFoto(i,"foto2")}),o.qZA(),o.YNc(58,er,2,0,"small",8),o.qZA(),o._UZ(59,"hr",23),o.TgZ(60,"button",24),o._uU(61,"Agregar"),o.qZA()()()(),o.TgZ(62,"footer",25)(63,"p",26),o._uU(64,"\xa9 2017-2018 Company Name"),o.qZA(),o.TgZ(65,"ul",27)(66,"li",28)(67,"a",29),o._uU(68,"Privacy"),o.qZA()(),o.TgZ(69,"li",28)(70,"a",29),o._uU(71,"Terms"),o.qZA()(),o.TgZ(72,"li",28)(73,"a",29),o._uU(74,"Support"),o.qZA()()()()()),2&n&&(o.xp6(6),o.Q6J("formGroup",r.grupoDeControles),o.xp6(6),o.Q6J("ngIf",(null==r.grupoDeControles.controls.nombre.errors?null:r.grupoDeControles.controls.nombre.errors.required)&&r.grupoDeControles.controls.nombre.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.nombre.errors?null:r.grupoDeControles.controls.nombre.errors.validadorDeEspacios)&&r.grupoDeControles.controls.nombre.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.apellido.errors?null:r.grupoDeControles.controls.apellido.errors.required)&&r.grupoDeControles.controls.apellido.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.apellido.errors?null:r.grupoDeControles.controls.apellido.errors.validadorDeEspacios)&&r.grupoDeControles.controls.apellido.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.required)&&r.grupoDeControles.controls.edad.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.min)||(null==r.grupoDeControles.controls.edad.errors?null:r.grupoDeControles.controls.edad.errors.max)),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.required)&&r.grupoDeControles.controls.dni.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.min)||(null==r.grupoDeControles.controls.dni.errors?null:r.grupoDeControles.controls.dni.errors.max)),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.obraSocial.errors?null:r.grupoDeControles.controls.obraSocial.errors.required)&&r.grupoDeControles.controls.obraSocial.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.mail.errors?null:r.grupoDeControles.controls.mail.errors.required)&&r.grupoDeControles.controls.mail.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.mail.errors?null:r.grupoDeControles.controls.mail.errors.email)&&r.grupoDeControles.controls.mail.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.contrasenia.errors?null:r.grupoDeControles.controls.contrasenia.errors.required)&&r.grupoDeControles.controls.contrasenia.touched),o.xp6(1),o.Q6J("ngIf",(null==r.grupoDeControles.controls.contrasenia.errors?null:r.grupoDeControles.controls.contrasenia.errors.validadorDeEspacios)&&r.grupoDeControles.controls.contrasenia.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.img.errors?null:r.grupoDeControles.controls.img.errors.required)&&r.grupoDeControles.controls.img.touched),o.xp6(5),o.Q6J("ngIf",(null==r.grupoDeControles.controls.img2.errors?null:r.grupoDeControles.controls.img2.errors.required)&&r.grupoDeControles.controls.img2.touched),o.xp6(2),o.Q6J("disabled",r.grupoDeControles.invalid))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,H.O5,c.wV],styles:[""]}),t})();function or(t,e){if(1&t){const n=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){return o.CHM(n),o.oxw().admin()}),o._uU(1,"Alta admin"),o.qZA()}}const nr=[{path:"",component:(()=>{class t{constructor(n,r){this.router=n,this.athSer=r}ngOnInit(){this.usuaria=this.athSer.usuarioIngresado}usuario(){this.router.navigateByUrl("/alta/altaPaciente")}especialista(){this.router.navigateByUrl("/alta/altaEspecialista")}admin(){this.router.navigateByUrl("/alta/admin")}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(F.F0),o.Y36(V.e))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-alta"]],decls:14,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[1,"col-md-8","order-md-1"],["type","button",1,"btn","btn-success",3,"click"]],template:function(n,r){1&n&&(o._UZ(0,"br"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3)(5,"span",4),o._uU(6,"ALTAS"),o.qZA()(),o.TgZ(7,"button",5),o.NdJ("click",function(){return r.usuario()}),o._uU(8,"Alta usuario"),o.qZA(),o.TgZ(9,"button",6),o.NdJ("click",function(){return r.especialista()}),o._uU(10,"Alta espelista"),o.qZA(),o.YNc(11,or,2,0,"button",7),o.qZA(),o.TgZ(12,"div",8),o._UZ(13,"router-outlet"),o.qZA()()()),2&n&&(o.xp6(11),o.Q6J("ngIf","admin"==r.usuaria.perfil))},directives:[H.O5,F.lC],styles:[""]}),t})(),children:[{path:"altaPaciente",component:tr},{path:"altaEspecialista",component:Mn},{path:"esp",component:we.F},{path:"admin",component:yn}]}];let rr=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[F.Bz.forChild(nr)],F.Bz]}),t})(),sr=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[H.ez,rr]]}),t})()}}]);